
import { Injectable, signal, computed } from '@angular/core';

export type Language = 'en' | 'es' | 'pt';

const dictionary = {
  en: {
    // App Shell
    today: 'Today',
    inbox: 'Inbox',
    leads: 'Leads',
    pipeline: 'Pipeline',
    proposals: 'Proposals',
    contracts: 'Contracts',
    dashboard: 'Dashboard',
    team: 'Team',
    integrations: 'Integrations',
    settings: 'Settings',
    collapse: 'Collapse',
    logout: 'Log out',
    openSidebar: 'Open sidebar',
    closeSidebar: 'Close sidebar',
    workspace: 'Workspace',
    seed_data: 'Seed Demo Data',
    reset_workspace: 'Reset Workspace',
    
    // Landing Page
    landing_features: 'Features',
    landing_pricing: 'Pricing',
    landing_login: 'Log In',
    landing_main_title: 'Stop Chasing Deals.',
    landing_main_subtitle: 'Start Controlling Revenue.',
    landing_description: 'Revenue OS is a WhatsApp-first Sales Operating System that enforces discipline, predicts revenue, and turns your sales process into a high-performance engine.',
    landing_cta: 'View Live Demo',
    landing_features_title: 'More Than a CRM ‚Äî A System for Growth',
    landing_features_subtitle: 'We focus on the three pillars of a predictable sales machine.',
    landing_feature1_title: 'Execution Discipline',
    landing_feature1_desc: 'Never miss a follow-up. Our "Today" view tells your team exactly what to do next to keep every deal moving forward. No more deals falling through the cracks.',
    landing_feature2_title: 'Revenue Predictability',
    landing_feature2_desc: 'From the first message to the final contract, our dashboard gives you a real-time, data-driven forecast. Know exactly where you stand and what it takes to hit your goal.',
    landing_feature3_title: 'Calm Control',
    landing_feature3_desc: 'Our clean, intuitive interface gives you a powerful command center without the clutter of traditional CRMs. See your entire operation at a glance and make decisions with confidence.',
    landing_footer: '¬© 2024 Revenue OS. All rights reserved.',

    // Onboarding
    onboarding_welcome_title: 'Welcome to Revenue OS',
    onboarding_welcome_subtitle: 'Let‚Äôs get your first sale flowing in just a few clicks.',
    onboarding_step: 'Step',
    onboarding_of: 'of',
    onboarding_step1_title: 'First, what\'s your company\'s name?',
    onboarding_step1_subtitle: 'This will be used to customize your workspace.',
    onboarding_step2_title: 'Create your first salesperson',
    onboarding_step2_subtitle: 'Who will be closing deals? You can add more later.',
    onboarding_step3_title: 'Create your first lead',
    onboarding_step3_subtitle: 'We\'ve pre-filled an example to get you started.',
    onboarding_step4_title: 'Set the first follow-up',
    onboarding_step4_subtitle: 'Revenue OS is all about discipline. Every lead needs a next action.',
    onboarding_action: 'Action: Initial contact message',
    onboarding_due: 'Due: Tomorrow',
    onboarding_continue: 'Continue',
    onboarding_create_continue: 'Create Lead & Continue',
    onboarding_finish: 'All Set! Enter App',

    // Activation Checklist
    checklist_title: 'Let\'s get you to your first win',
    checklist_subtitle: 'Complete these steps to get the most out of Revenue OS.',
    checklist_complete_title: 'üéâ You\'re all set up!',
    checklist_complete_subtitle: 'You\'ve completed the core actions. Now, let\'s go close some deals!',
    checklist_tasks_completed: 'tasks completed',
    checklist_task_respond: 'Respond to first lead',
    checklist_task_qualify: 'Qualify a lead',
    checklist_task_move: 'Move a deal in pipeline',
    checklist_task_send: 'Send a proposal',
    checklist_simulate: 'Simulate',
    checklist_dismiss: 'Dismiss Checklist',

    // Today Page
    today_hotLeads: 'üî• Hot Leads to Convert',
    today_qualified_ago: 'Qualified {{time}} ago via {{origin}}',
    today_budget: 'Budget',
    today_next_deal: 'Next: Create Deal',
    today_convert: 'Convert',
    today_no_hot_leads: 'No hot leads right now. Qualify more leads from the Inbox!',
    today_new_leads: 'New Leads Awaiting First Contact',
    today_from_origin: 'From {{origin}}',
    today_action_contact: 'Action: First Contact',
    today_contact: 'Contact',
    today_inbox_zero: 'üéâ Inbox zero! No new leads are waiting.',
    today_overdue: 'Overdue: Client Waiting',
    today_days_overdue: '{{days}} days overdue',
    today_reschedule: 'Reschedule',
    today_resolve: 'Resolve',
    today_no_overdue: 'üëç Excellent! No follow-ups are overdue.',
    today_proposals_viewed: 'Proposals Viewed',
    today_viewed_ago: 'Viewed {{time}} ago',
    today_follow_up: 'Follow-up',
    today_no_hot_proposals: 'üëÄ No hot proposals are waiting right now.',
    today_deals_at_risk: 'Deals At Risk',
    today_stalled_in: 'Stalled in {{stage}}',
    today_last_action_ago: 'Last action {{time}} ago',
    today_nudge: 'Nudge',
    today_no_stalled_deals: 'üöÄ Momentum is strong! No deals are stalled.',
    today_reactivation_opps: 'Reactivation Opportunities',
    today_no_reactivations: 'üå± No deals set for later reactivation.',
    today_learning_hub: 'Learning Hub',
    today_start: 'Start',
    today_min: 'min',

    // Inbox Page
    inbox_title: 'Inbox',
    inbox_subtitle: 'All new leads, one place. No lead left behind.',
    inbox_filter_all: 'All',
    inbox_filter_needs_reply: 'Needs First Reply',
    inbox_filter_hot: 'Hot üî•',
    inbox_filter_disqualified: 'Disqualified',
    inbox_empty_title: 'Inbox clear!',
    inbox_empty_subtitle: 'No leads match the current filter.',
    inbox_select_lead_title: 'Select a lead',
    inbox_select_lead_subtitle: 'Choose a lead from the list to see details.',
    inbox_conversation: 'Conversation',
    inbox_no_messages: 'No messages yet.',
    inbox_qualification_summary: 'Qualification Summary',
    inbox_quick_actions: 'Quick Actions',
    inbox_reply_now: 'Reply Now',
    inbox_qualify_lead: 'Qualify Lead',
    inbox_schedule_follow_up: 'Schedule Follow-up',
    inbox_create_deal: 'Create Deal',
    inbox_disqualify: 'Disqualify',
    inbox_lead_score: 'Lead Score',
    inbox_actions_placeholder: 'Actions will appear here when you select a lead.',

    // Leads Page
    leads_title: 'Leads',
    leads_create: 'Create Lead',
    leads_head_name: 'Name',
    leads_head_origin: 'Origin',
    leads_head_owner: 'Owner',
    leads_head_status: 'Status',
    leads_head_next_action: 'Next Action',
    leads_head_due_date: 'Due Date',
    leads_summary: '{{count}} leads',
    leads_summary_overdue: '{{count}} overdue',
    leads_summary_due_today: '{{count}} due today',
    leads_filter_all: 'All',
    leads_filter_overdue: 'Overdue',
    leads_filter_due_today: 'Due Today',
    leads_filter_new: 'New',
    leads_filter_hot: 'Hot',
    leads_action_complete: 'Complete',
    leads_action_completed: 'Completed',
    leads_action_reschedule: 'Reschedule',
    leads_action_edit: 'Edit',
    leads_action_view_details: 'View Details',
    leads_action_message: 'Message',
    leads_due_overdue: 'Overdue by {{days}}d',
    leads_due_today: 'Due today',
    leads_due_in: 'Due in {{days}}d',
    leads_due_tomorrow: 'Due tomorrow',
    leads_no_due_date: 'Needs scheduling',
    leads_empty_title: 'No leads here yet!',
    leads_empty_subtitle: 'Create your first lead to get started, or load some demo data.',
    leads_filter_empty_title: 'No leads match this filter',
    leads_filter_empty_subtitle: 'Try adjusting or clearing your filters.',
    leads_clear_filters: 'Clear Filters',
    
    // Create Lead Modal
    leads_create_modal_title: 'Create a New Lead',
    leads_create_modal_subtitle: 'Start by capturing the basic details and setting a clear next action.',
    leads_create_modal_name_label: 'Lead Name',
    leads_create_modal_name_placeholder: 'e.g., Acme Corporation',
    leads_create_modal_origin_label: 'Origin',
    leads_create_modal_owner_label: 'Owner',
    leads_create_modal_status_label: 'Status',
    leads_create_modal_next_action_label: 'Next Action',
    leads_create_modal_next_action_placeholder: 'e.g., Initial follow-up call',
    leads_create_modal_due_date_label: 'Due Date',
    leads_create_modal_error: 'All fields, including Next Action and Due Date, are required.',
    leads_create_modal_save: 'Create Lead',
    
    // Lead Detail Slide-over
    leads_detail_notes: 'Notes',
    leads_detail_notes_placeholder: 'Add notes about this lead...',
    leads_detail_activity: 'Activity',
    leads_detail_save_changes: 'Save Changes',

    // Pipeline Page
    pipeline_stage_new_lead: 'New Lead',
    pipeline_stage_contacted: 'Contacted',
    pipeline_stage_proposal_sent: 'Proposal Sent',
    pipeline_stage_negotiation: 'Negotiation',
    pipeline_stage_won: 'Won',
    pipeline_stage_lost: 'Lost',
    pipeline_no_deals: 'No deals here yet.',
    pipeline_ai_insight: 'AI Insight: Client viewed proposal 3 times. A follow-up now has a 75% higher chance of success.',
    pipeline_next: 'Next:',
    pipeline_due: 'Due:',
    pipeline_health_tooltip: 'AI Deal Health requires Pro plan',
    pipeline_won_tooltip: 'Mark as Won',
    pipeline_lost_tooltip: 'Mark as Lost',

    // Proposals Page
    proposals_title: 'Proposals',
    proposals_summary: '{{total}} proposals ¬∑ {{viewed}} viewed ¬∑ {{needs_follow_up}} need follow-up ¬∑ {{accepted}} accepted',
    proposals_create: 'Create Proposal',
    proposals_filter_all: 'All',
    proposals_filter_draft: 'Draft',
    proposals_filter_sent: 'Sent',
    proposals_filter_viewed: 'Viewed',
    proposals_filter_negotiation: 'Negotiation',
    proposals_filter_accepted: 'Accepted',
    proposals_quick_filter_needs_follow_up: 'Needs Follow-up',
    proposals_quick_filter_viewed_recently: 'Viewed Recently',
    proposals_quick_filter_expiring_soon: 'Expiring Soon',
    proposals_search_placeholder: 'Search by client, value, deal stage...',
    proposals_head_client: 'Client',
    proposals_head_deal_stage: 'Deal Stage',
    proposals_head_value: 'Value',
    proposals_head_status: 'Proposal Status',
    proposals_head_engagement: 'Engagement',
    proposals_head_last_activity: 'Last Activity',
    proposals_head_actions: 'Actions',
    proposals_empty_title: 'This is your Revenue Closing Engine',
    proposals_empty_subtitle: 'Create your first proposal to start tracking engagement and closing deals.',
    proposals_filter_empty_title: 'No proposals match your filters',
    proposals_filter_empty_subtitle: 'Try a different search or filter combination.',
    proposals_clear_filters: 'Clear Filters',
    proposals_engagement_viewed: 'Viewed {{count}}x',
    proposals_engagement_last_viewed: '{{time}} ago',
    proposals_version: 'v{{version}}',
    proposals_latest: 'Latest',
    proposals_action_open: 'Open Proposal',
    proposals_action_copy_link: 'Copy Public Link',
    proposals_action_resend: 'Resend Proposal',
    proposals_action_follow_up: 'Generate Follow-up (AI)',
    proposals_action_duplicate: 'Duplicate (New Version)',
    proposals_action_generate_contract: 'Generate Contract',
    proposals_action_mark_replaced: 'Mark as Replaced',
    proposals_signal_high_intent: 'High Intent',
    proposals_signal_risk_not_opened: 'Risk: Not Opened',
    proposals_signal_stalled_negotiation: 'Stalled Negotiation',

    // Contracts Page
    contracts_title: 'Contracts',
    contracts_generate: 'Generate Contract',
    contracts_generate_tooltip: 'Generate from an accepted proposal',
    contracts_filter_all: 'All',
    contracts_filter_draft: 'Draft',
    contracts_filter_sent: 'Sent',
    contracts_filter_signed: 'Signed',
    contracts_head_client: 'Client',
    contracts_head_value: 'Value',
    contracts_head_status: 'Status',
    contracts_head_created: 'Created',
    contracts_head_signed: 'Signed',
    contracts_head_actions: 'Actions',
    contracts_view: 'View',
    contracts_empty_title: 'No contracts here yet.',
    contracts_empty_subtitle: 'Generate a new contract from an accepted proposal.',

    // Team Page
    team_title: 'Team Performance',
    team_add_salesperson: 'Add Salesperson',
    team_kpi_revenue: 'Total Revenue This Month',
    team_kpi_deals: 'Total Deals Won',
    team_kpi_followup: 'Avg. Follow-up Rate',
    team_owner_alerts: 'Owner Alerts',
    team_alert_bottleneck: '<b>Bottleneck Found:</b> Proposal follow-up is your biggest bottleneck this week, with 3 deals stalled after viewing.',
    team_alert_risk: '<b>Deals at Risk:</b> 2 deals assigned to Bruno Costa are at risk due to overdue follow-ups.',
    team_accountability_signals: 'Accountability Signals',
    team_signal_coaching: '<b>Needs Coaching:</b> Bruno consistently misses follow-ups.',
    team_view_details: 'View Details',
    team_signal_top_performer: '<b>Top Performer:</b> Anna has the fastest average response time this week.',
    team_head_salesperson: 'Salesperson',
    team_head_response_time: 'Avg. Response Time',
    team_head_followup_rate: 'Follow-up Rate',
    team_head_deals_won: 'Deals Won',
    team_head_revenue: 'Revenue Generated',
    team_head_coaching: 'Coaching Needed',
    team_trend: 'Trend:',
    team_on_track: 'On Track',

    // Integrations Page
    integrations_hub_title: 'Integrations Hub',
    integrations_hub_subtitle: 'Connect your tools to create automated revenue flows, not just data syncs.',
    integrations_ai_title: 'AI-Powered Suggestions',
    integrations_category_lead_capture: 'Lead Capture',
    integrations_category_conversations: 'Conversations & Messaging',
    integrations_category_marketing: 'Marketing & Automation',
    integrations_category_meetings: 'Meetings & Scheduling',
    integrations_category_payments: 'Payments & Revenue',
    integrations_category_productivity: 'Productivity & Data',
    integrations_category_advanced: 'Advanced Integrations',
    integrations_status_connected: 'Connected',
    integrations_status_available: 'Available',
    integrations_status_coming_soon: 'Coming Soon',
    integrations_action_manage: 'Manage Flows',
    integrations_action_view: 'View Flows',
    integrations_action_request: 'Request Access',
    integrations_slideover_manage_connection: 'Manage Connection',
    integrations_slideover_connect_to: 'Connect {{name}}',
    integrations_slideover_title: 'Available Flows',
    integrations_slideover_subtitle: 'Automate your sales process by activating these trigger-action flows.',

    // Settings Page
    settings_title: 'Settings',
    settings_company_title: 'Company Settings',
    settings_company_subtitle: 'Manage your company details and sales goals.',
    settings_company_name: 'Company Name',
    settings_monthly_goal: 'Monthly Sales Goal ($)',
    settings_pipeline_stages: 'Pipeline Stages',
    settings_pipeline_subtitle: 'Customize the stages of your sales pipeline. (Functionality coming soon)',
    settings_integrations_title: 'Integrations',
    settings_integrations_subtitle: 'Connect Revenue OS to your other tools.',
    settings_upgrade_pro: 'Upgrade to Pro to unlock',
    settings_google_calendar: 'Google Calendar',
    settings_google_calendar_desc: 'Sync your follow-ups',
    settings_quickbooks: 'QuickBooks',
    settings_quickbooks_desc: 'Accounting Automation',
    settings_mailchimp: 'Mailchimp',
    settings_mailchimp_desc: 'Marketing Automation',

    // Modals
    modal_next_action_title: 'To keep momentum, every deal move requires a clear next step.',
    modal_next_action_congrats: 'Congratulations on Winning!',
    modal_next_action_mark_lost: 'Marking {{name}} as Lost',
    modal_next_action_moving_to: 'Moving to "{{stage}}"',
    modal_next_action_required: 'Action Required',
    modal_next_action_label: 'Next Action',
    modal_next_action_placeholder: 'e.g., Follow-up call to discuss pricing',
    modal_due_date_label: 'Due Date',
    modal_channel_label: 'Channel',
    modal_error_required: 'All fields are required to proceed.',
    modal_cancel: 'Cancel',
    modal_set_action_move: 'Set Action & Move',

    modal_qualify_title: 'Qualify Lead: {{name}}',
    modal_qualify_subtitle: 'Answer these questions to calculate a lead score and prioritize your efforts.',
    modal_qualify_budget: 'Budget',
    modal_qualify_budget_no_budget: 'No budget',
    modal_qualify_budget_low: 'Low',
    modal_qualify_budget_medium: 'Medium',
    modal_qualify_budget_high: 'High',
    modal_qualify_urgency: 'Urgency',
    modal_qualify_urgency_today: 'Today',
    modal_qualify_urgency_this_week: 'This week',
    modal_qualify_urgency_this_month: 'This month',
    modal_qualify_urgency_just_researching: 'Just researching',
    modal_qualify_fit: 'Fit',
    modal_qualify_fit_perfect: 'Perfect fit',
    modal_qualify_fit_partial: 'Partial fit',
    modal_qualify_fit_not_a_fit: 'Not a fit',
    modal_qualify_intent: 'Intent Signal',
    modal_qualify_intent_pricing: 'Pricing request',
    modal_qualify_intent_appointment: 'Book appointment',
    modal_qualify_intent_proposal: 'Asked for proposal',
    modal_qualify_intent_inquiry: 'General inquiry',
    modal_qualify_notes: 'Notes (Optional)',
    modal_qualify_notes_placeholder: 'Add any relevant details...',
    modal_qualify_error: 'Please complete all required fields.',
    modal_qualify_save: 'Save & Calculate Score',

  },
  es: {
    // App Shell
    today: 'Hoy',
    inbox: 'Bandeja de Entrada',
    leads: 'Prospectos',
    pipeline: 'Embudo',
    proposals: 'Propuestas',
    contracts: 'Contratos',
    dashboard: 'Panel',
    team: 'Equipo',
    integrations: 'Integraciones',
    settings: 'Configuraci√≥n',
    collapse: 'Contraer',
    logout: 'Cerrar sesi√≥n',
    openSidebar: 'Abrir barra lateral',
    closeSidebar: 'Cerrar barra lateral',
    workspace: 'Espacio de Trabajo',
    seed_data: 'Cargar Datos de Demo',
    reset_workspace: 'Reiniciar Espacio de Trabajo',

    // Landing Page
    landing_features: 'Caracter√≠sticas',
    landing_pricing: 'Precios',
    landing_login: 'Iniciar Sesi√≥n',
    landing_main_title: 'Deja de Perseguir Tratos.',
    landing_main_subtitle: 'Empieza a Controlar Ingresos.',
    landing_description: 'Revenue OS es un sistema operativo de ventas centrado en WhatsApp que impone disciplina, predice ingresos y convierte tu proceso de ventas en un motor de alto rendimiento.',
    landing_cta: 'Ver Demo en Vivo',
    landing_features_title: 'M√°s que un CRM ‚Äî Un Sistema para Crecer',
    landing_features_subtitle: 'Nos enfocamos en los tres pilares de una m√°quina de ventas predecible.',
    landing_feature1_title: 'Disciplina de Ejecuci√≥n',
    landing_feature1_desc: 'Nunca pierdas un seguimiento. Nuestra vista "Hoy" le dice a tu equipo exactamente qu√© hacer para mantener cada trato en movimiento. No m√°s tratos olvidados.',
    landing_feature2_title: 'Previsibilidad de Ingresos',
    landing_feature2_desc: 'Desde el primer mensaje hasta el contrato final, nuestro panel te da un pron√≥stico en tiempo real basado en datos. Conoce exactamente tu posici√≥n y lo que se necesita para alcanzar tu meta.',
    landing_feature3_title: 'Control con Calma',
    landing_feature3_desc: 'Nuestra interfaz limpia e intuitiva te da un potente centro de mando sin el desorden de los CRM tradicionales. Ve toda tu operaci√≥n de un vistazo y toma decisiones con confianza.',
    landing_footer: '¬© 2024 Revenue OS. Todos los derechos reservados.',

    // Onboarding
    onboarding_welcome_title: 'Bienvenido a Revenue OS',
    onboarding_welcome_subtitle: 'Vamos a poner en marcha tu primera venta en solo unos clics.',
    onboarding_step: 'Paso',
    onboarding_of: 'de',
    onboarding_step1_title: 'Primero, ¬øc√≥mo se llama tu empresa?',
    onboarding_step1_subtitle: 'Esto se usar√° para personalizar tu espacio de trabajo.',
    onboarding_step2_title: 'Crea tu primer vendedor',
    onboarding_step2_subtitle: '¬øQui√©n cerrar√° los tratos? Puedes agregar m√°s despu√©s.',
    onboarding_step3_title: 'Crea tu primer prospecto',
    onboarding_step3_subtitle: 'Hemos rellenado un ejemplo para que comiences.',
    onboarding_step4_title: 'Establece el primer seguimiento',
    onboarding_step4_subtitle: 'Revenue OS se basa en la disciplina. Cada prospecto necesita una siguiente acci√≥n.',
    onboarding_action: 'Acci√≥n: Mensaje de contacto inicial',
    onboarding_due: 'Vence: Ma√±ana',
    onboarding_continue: 'Continuar',
    onboarding_create_continue: 'Crear Prospecto y Continuar',
    onboarding_finish: '¬°Todo listo! Entrar a la App',
    
    // Activation Checklist
    checklist_title: 'Vamos a guiarte a tu primera victoria',
    checklist_subtitle: 'Completa estos pasos para aprovechar al m√°ximo Revenue OS.',
    checklist_complete_title: 'üéâ ¬°Todo configurado!',
    checklist_complete_subtitle: 'Has completado las acciones principales. ¬°Ahora a cerrar tratos!',
    checklist_tasks_completed: 'tareas completadas',
    checklist_task_respond: 'Responder al primer prospecto',
    checklist_task_qualify: 'Calificar un prospecto',
    checklist_task_move: 'Mover un trato en el embudo',
    checklist_task_send: 'Enviar una propuesta',
    checklist_simulate: 'Simular',
    checklist_dismiss: 'Ocultar Lista',
    
    // Today Page
    today_hotLeads: 'üî• Prospectos Calientes para Convertir',
    today_qualified_ago: 'Calificado hace {{time}} v√≠a {{origin}}',
    today_budget: 'Presupuesto',
    today_next_deal: 'Siguiente: Crear Trato',
    today_convert: 'Convertir',
    today_no_hot_leads: 'No hay prospectos calientes ahora. ¬°Califica m√°s desde la Bandeja de Entrada!',
    today_new_leads: 'Nuevos Prospectos Esperando Contacto',
    today_from_origin: 'De {{origin}}',
    today_action_contact: 'Acci√≥n: Primer Contacto',
    today_contact: 'Contactar',
    today_inbox_zero: 'üéâ ¬°Bandeja de entrada a cero! No hay nuevos prospectos esperando.',
    today_overdue: 'Atrasado: Cliente Esperando',
    today_days_overdue: '{{days}} d√≠as de retraso',
    today_reschedule: 'Reprogramar',
    today_resolve: 'Resolver',
    today_no_overdue: 'üëç ¬°Excelente! No hay seguimientos atrasados.',
    today_proposals_viewed: 'Propuestas Vistas',
    today_viewed_ago: 'Vista hace {{time}}',
    today_follow_up: 'Seguimiento',
    today_no_hot_proposals: 'üëÄ No hay propuestas calientes esperando ahora.',
    today_deals_at_risk: 'Tratos en Riesgo',
    today_stalled_in: 'Estancado en {{stage}}',
    today_last_action_ago: '√öltima acci√≥n hace {{time}}',
    today_nudge: 'Impulsar',
    today_no_stalled_deals: 'üöÄ ¬°El ritmo es bueno! Ning√∫n trato est√° estancado.',
    today_reactivation_opps: 'Oportunidades de Reactivaci√≥n',
    today_no_reactivations: 'üå± No hay tratos para reactivar m√°s tarde.',
    today_learning_hub: 'Centro de Aprendizaje',
    today_start: 'Empezar',
    today_min: 'min',

    // Proposals Page
    proposals_title: 'Propuestas',
    proposals_summary: '{{total}} propuestas ¬∑ {{viewed}} vistas ¬∑ {{needs_follow_up}} necesitan seguimiento ¬∑ {{accepted}} aceptadas',
    proposals_create: 'Crear Propuesta',
    proposals_filter_all: 'Todas',
    proposals_filter_draft: 'Borrador',
    proposals_filter_sent: 'Enviadas',
    proposals_filter_viewed: 'Vistas',
    proposals_filter_negotiation: 'Negociaci√≥n',
    proposals_filter_accepted: 'Aceptadas',
    proposals_quick_filter_needs_follow_up: 'Necesita seguimiento',
    proposals_quick_filter_viewed_recently: 'Vistas recientemente',
    proposals_quick_filter_expiring_soon: 'Vencen pronto',
    proposals_search_placeholder: 'Buscar por cliente, valor, etapa...',
    proposals_head_client: 'Cliente',
    proposals_head_deal_stage: 'Etapa del Trato',
    proposals_head_value: 'Valor',
    proposals_head_status: 'Estado Propuesta',
    proposals_head_engagement: 'Interacci√≥n',
    proposals_head_last_activity: '√öltima Actividad',
    proposals_head_actions: 'Acciones',
    proposals_empty_title: 'Este es tu Motor de Cierre de Ingresos',
    proposals_empty_subtitle: 'Crea tu primera propuesta para empezar a rastrear la interacci√≥n y cerrar tratos.',
    proposals_filter_empty_title: 'No hay propuestas que coincidan con tus filtros',
    proposals_filter_empty_subtitle: 'Prueba una b√∫squeda o combinaci√≥n de filtros diferente.',
    proposals_clear_filters: 'Limpiar Filtros',
    proposals_engagement_viewed: 'Vista {{count}}x',
    proposals_engagement_last_viewed: 'hace {{time}}',
    proposals_version: 'v{{version}}',
    proposals_latest: '√öltima',
    proposals_action_open: 'Abrir Propuesta',
    proposals_action_copy_link: 'Copiar Enlace P√∫blico',
    proposals_action_resend: 'Reenviar Propuesta',
    proposals_action_follow_up: 'Generar Seguimiento (IA)',
    proposals_action_duplicate: 'Duplicar (Nueva Versi√≥n)',
    proposals_action_generate_contract: 'Generar Contrato',
    proposals_action_mark_replaced: 'Marcar como Reemplazada',
    proposals_signal_high_intent: 'Alta Intenci√≥n',
    proposals_signal_risk_not_opened: 'Riesgo: No Abierta',
    proposals_signal_stalled_negotiation: 'Negociaci√≥n Estancada',

    // Modals
    modal_next_action_title: 'Para mantener el impulso, cada movimiento de un trato requiere un siguiente paso claro.',
    modal_next_action_congrats: '¬°Felicitaciones por la Victoria!',
    modal_next_action_mark_lost: 'Marcando {{name}} como Perdido',
    modal_next_action_moving_to: 'Moviendo a "{{stage}}"',
    modal_next_action_required: 'Acci√≥n Requerida',
    modal_next_action_label: 'Siguiente Acci√≥n',
    modal_next_action_placeholder: 'ej., Llamada de seguimiento para discutir precios',
    modal_due_date_label: 'Fecha de Vencimiento',
    modal_channel_label: 'Canal',
    modal_error_required: 'Todos los campos son obligatorios para continuar.',
    modal_cancel: 'Cancelar',
    modal_set_action_move: 'Fijar Acci√≥n y Mover',

    modal_qualify_title: 'Calificar Prospecto: {{name}}',
    modal_qualify_subtitle: 'Responde estas preguntas para calcular un puntaje y priorizar tus esfuerzos.',
    modal_qualify_budget: 'Presupuesto',
    modal_qualify_urgency: 'Urgencia',
    modal_qualify_fit: 'Ajuste',
    modal_qualify_intent: 'Se√±al de Intenci√≥n',
    modal_qualify_notes: 'Notas (Opcional)',
    modal_qualify_notes_placeholder: 'A√±ade cualquier detalle relevante...',
    modal_qualify_error: 'Por favor, completa todos los campos requeridos.',
    modal_qualify_save: 'Guardar y Calcular Puntaje',
  },
  pt: {
    // App Shell
    today: 'Hoje',
    inbox: 'Caixa de Entrada',
    leads: 'Leads',
    pipeline: 'Pipeline',
    proposals: 'Propostas',
    contracts: 'Contratos',
    dashboard: 'Dashboard',
    team: 'Equipe',
    integrations: 'Integra√ß√µes',
    settings: 'Configura√ß√µes',
    collapse: 'Recolher',
    logout: 'Sair',
    openSidebar: 'Abrir menu',
    closeSidebar: 'Fechar menu',
    workspace: '√Årea de Trabalho',
    seed_data: 'Carregar Dados de Demo',
    reset_workspace: 'Redefinir √Årea de Trabalho',
    
    // Landing Page
    landing_features: 'Funcionalidades',
    landing_pricing: 'Pre√ßos',
    landing_login: 'Entrar',
    landing_main_title: 'Pare de Correr Atr√°s de Vendas.',
    landing_main_subtitle: 'Comece a Controlar a Receita.',
    landing_description: 'O Revenue OS √© um Sistema Operacional de Vendas focado em WhatsApp que imp√µe disciplina, prev√™ a receita e transforma seu processo de vendas em um motor de alta performance.',
    landing_cta: 'Ver Demo ao Vivo',
    landing_features_title: 'Mais que um CRM ‚Äî Um Sistema para o Crescimento',
    landing_features_subtitle: 'N√≥s focamos nos tr√™s pilares de uma m√°quina de vendas previs√≠vel.',
    landing_feature1_title: 'Disciplina na Execu√ß√£o',
    landing_feature1_desc: 'Nunca perca um follow-up. Nossa tela "Hoje" diz √† sua equipe exatamente o que fazer para manter cada neg√≥cio avan√ßando. Chega de neg√≥cios esquecidos.',
    landing_feature2_title: 'Previsibilidade de Receita',
    landing_feature2_desc: 'Da primeira mensagem ao contrato final, nosso dashboard oferece uma previs√£o em tempo real, baseada em dados. Saiba exatamente onde voc√™ est√° e o que √© preciso para atingir sua meta.',
    landing_feature3_title: 'Controle com Tranquilidade',
    landing_feature3_desc: 'Nossa interface limpa e intuitiva oferece um poderoso centro de comando sem a desordem dos CRMs tradicionais. Veja toda a sua opera√ß√£o de relance e tome decis√µes com confian√ßa.',
    landing_footer: '¬© 2024 Revenue OS. Todos os direitos reservados.',

    // Onboarding
    onboarding_welcome_title: 'Bem-vindo ao Revenue OS',
    onboarding_welcome_subtitle: 'Vamos preparar sua primeira venda em apenas alguns cliques.',
    onboarding_step: 'Passo',
    onboarding_of: 'de',
    onboarding_step1_title: 'Primeiro, qual √© o nome da sua empresa?',
    onboarding_step1_subtitle: 'Isso ser√° usado para personalizar seu espa√ßo de trabalho.',
    onboarding_step2_title: 'Crie seu primeiro vendedor',
    onboarding_step2_subtitle: 'Quem fechar√° os neg√≥cios? Voc√™ pode adicionar mais tarde.',
    onboarding_step3_title: 'Crie seu primeiro lead',
    onboarding_step3_subtitle: 'N√≥s preenchemos um exemplo para voc√™ come√ßar.',
    onboarding_step4_title: 'Defina o primeiro follow-up',
    onboarding_step4_subtitle: 'O Revenue OS √© sobre disciplina. Todo lead precisa de uma pr√≥xima a√ß√£o.',
    onboarding_action: 'A√ß√£o: Mensagem de contato inicial',
    onboarding_due: 'Prazo: Amanh√£',
    onboarding_continue: 'Continuar',
    onboarding_create_continue: 'Criar Lead e Continuar',
    onboarding_finish: 'Tudo pronto! Entrar no App',
    
    // Activation Checklist
    checklist_title: 'Vamos te guiar para sua primeira vit√≥ria',
    checklist_subtitle: 'Complete estas etapas para aproveitar ao m√°ximo o Revenue OS.',
    checklist_complete_title: 'üéâ Tudo configurado!',
    checklist_complete_subtitle: 'Voc√™ completou as a√ß√µes principais. Agora, vamos fechar neg√≥cios!',
    checklist_tasks_completed: 'tarefas conclu√≠das',
    checklist_task_respond: 'Responder ao primeiro lead',
    checklist_task_qualify: 'Qualificar um lead',
    checklist_task_move: 'Mover um neg√≥cio no pipeline',
    checklist_task_send: 'Enviar uma proposta',
    checklist_simulate: 'Simular',
    checklist_dismiss: 'Ocultar Lista',

    // Today Page
    today_hotLeads: 'üî• Leads Quentes para Converter',
    today_qualified_ago: 'Qualificado h√° {{time}} via {{origin}}',
    today_budget: 'Or√ßamento',
    today_next_deal: 'Pr√≥ximo: Criar Neg√≥cio',
    today_convert: 'Converter',
    today_no_hot_leads: 'Nenhum lead quente no momento. Qualifique mais leads da Caixa de Entrada!',
    today_new_leads: 'Novos Leads Aguardando Primeiro Contato',
    today_from_origin: 'De {{origin}}',
    today_action_contact: 'A√ß√£o: Primeiro Contato',
    today_contact: 'Contatar',
    today_inbox_zero: 'üéâ Caixa de entrada limpa! Nenhum novo lead aguardando.',
    today_overdue: 'Atrasado: Cliente Esperando',
    today_days_overdue: '{{days}} dias de atraso',
    today_reschedule: 'Reagendar',
    today_resolve: 'Resolver',
    today_no_overdue: 'üëç Excelente! Nenhum acompanhamento est√° atrasado.',
    today_proposals_viewed: 'Propostas Visualizadas',
    today_viewed_ago: 'Visualizada h√° {{time}}',
    today_follow_up: 'Acompanhar',
    today_no_hot_proposals: 'üëÄ Nenhuma proposta quente esperando no momento.',
    today_deals_at_risk: 'Neg√≥cios em Risco',
    today_stalled_in: 'Parado em {{stage}}',
    today_last_action_ago: '√öltima a√ß√£o h√° {{time}}',
    today_nudge: 'Impulsionar',
    today_no_stalled_deals: 'üöÄ O ritmo est√° forte! Nenhum neg√≥cio est√° parado.',
    today_reactivation_opps: 'Oportunidades de Reativa√ß√£o',
    today_no_reactivations: 'üå± Nenhum neg√≥cio definido para reativa√ß√£o posterior.',
    today_learning_hub: 'Central de Aprendizagem',
    today_start: 'Come√ßar',
    today_min: 'min',

    // Proposals Page
    proposals_title: 'Propostas',
    proposals_summary: '{{total}} propostas ¬∑ {{viewed}} visualizadas ¬∑ {{needs_follow_up}} precisam de follow-up ¬∑ {{accepted}} aceitas',
    proposals_create: 'Criar Proposta',
    proposals_filter_all: 'Todas',
    proposals_filter_draft: 'Rascunho',
    proposals_filter_sent: 'Enviadas',
    proposals_filter_viewed: 'Visualizadas',
    proposals_filter_negotiation: 'Negocia√ß√£o',
    proposals_filter_accepted: 'Aceitas',
    proposals_quick_filter_needs_follow_up: 'Precisa de Follow-up',
    proposals_quick_filter_viewed_recently: 'Vistas Recentemente',
    proposals_quick_filter_expiring_soon: 'Vencendo em Breve',
    proposals_search_placeholder: 'Buscar por cliente, valor, etapa...',
    proposals_head_client: 'Cliente',
    proposals_head_deal_stage: 'Etapa do Neg√≥cio',
    proposals_head_value: 'Valor',
    proposals_head_status: 'Status da Proposta',
    proposals_head_engagement: 'Engajamento',
    proposals_head_last_activity: '√öltima Atividade',
    proposals_head_actions: 'A√ß√µes',
    proposals_empty_title: 'Este √© o seu Motor de Fechamento de Receita',
    proposals_empty_subtitle: 'Crie sua primeira proposta para come√ßar a rastrear o engajamento e fechar neg√≥cios.',
    proposals_filter_empty_title: 'Nenhuma proposta corresponde aos seus filtros',
    proposals_filter_empty_subtitle: 'Tente uma busca ou combina√ß√£o de filtros diferente.',
    proposals_clear_filters: 'Limpar Filtros',
    proposals_engagement_viewed: 'Vista {{count}}x',
    proposals_engagement_last_viewed: 'h√° {{time}}',
    proposals_version: 'v{{version}}',
    proposals_latest: 'Mais Recente',
    proposals_action_open: 'Abrir Proposta',
    proposals_action_copy_link: 'Copiar Link P√∫blico',
    proposals_action_resend: 'Reenviar Proposta',
    proposals_action_follow_up: 'Gerar Follow-up (IA)',
    proposals_action_duplicate: 'Duplicar (Nova Vers√£o)',
    proposals_action_generate_contract: 'Gerar Contrato',
    proposals_action_mark_replaced: 'Marcar como Substitu√≠da',
    proposals_signal_high_intent: 'Alta Inten√ß√£o',
    proposals_signal_risk_not_opened: 'Risco: N√£o Aberta',
    proposals_signal_stalled_negotiation: 'Negocia√ß√£o Parada',

    // Modals
    modal_next_action_title: 'Para manter o ritmo, cada movimento de um neg√≥cio requer um pr√≥ximo passo claro.',
    modal_next_action_congrats: 'Parab√©ns pela Vit√≥ria!',
    modal_next_action_mark_lost: 'Marcando {{name}} como Perdido',
    modal_next_action_moving_to: 'Movendo para "{{stage}}"',
    modal_next_action_required: 'A√ß√£o Necess√°ria',
    modal_next_action_label: 'Pr√≥xima A√ß√£o',
    modal_next_action_placeholder: 'ex: Liga√ß√£o de acompanhamento para discutir pre√ßos',
    modal_due_date_label: 'Data de Vencimento',
    modal_channel_label: 'Canal',
    modal_error_required: 'Todos os campos s√£o obrigat√≥rios para prosseguir.',
    modal_cancel: 'Cancelar',
    modal_set_action_move: 'Definir A√ß√£o e Mover',

    modal_qualify_title: 'Qualificar Lead: {{name}}',
    modal_qualify_subtitle: 'Responda a estas perguntas para calcular uma pontua√ß√£o e priorizar seus esfor√ßos.',
    modal_qualify_budget: 'Or√ßamento',
    modal_qualify_urgency: 'Urg√™ncia',
    modal_qualify_fit: 'Compatibilidade',
    modal_qualify_intent: 'Sinal de Inten√ß√£o',
    modal_qualify_notes: 'Notas (Opcional)',
    modal_qualify_notes_placeholder: 'Adicione quaisquer detalhes relevantes...',
    modal_qualify_error: 'Por favor, preencha todos os campos obrigat√≥rios.',
    modal_qualify_save: 'Salvar e Calcular Pontua√ß√£o',
  }
};

type DictionaryKey = keyof typeof dictionary['en'];

@Injectable({ providedIn: 'root' })
export class TranslationService {
  language = signal<Language>(this.getInitialLanguage());

  private translations = computed(() => dictionary[this.language()]);

  private getInitialLanguage(): Language {
    if (typeof window !== 'undefined') {
        const storedLang = localStorage.getItem('language');
        if (storedLang === 'en' || storedLang === 'es' || storedLang === 'pt') {
            return storedLang;
        }
        const browserLang = navigator.language.split('-')[0];
        if (browserLang === 'es' || browserLang === 'pt') {
            return browserLang;
        }
    }
    return 'en';
  }

  translate(key: DictionaryKey) {
    return computed(() => this.translations()[key] || key);
  }

  translateWithParams(key: DictionaryKey, params: {[key: string]: string | number}) {
    return computed(() => {
        let translation = this.translations()[key] || key;
        for (const paramKey in params) {
            translation = translation.replace(`{{${paramKey}}}`, String(params[paramKey]));
        }
        return translation;
    });
  }
  
  changeLanguage(lang: Language) {
    this.language.set(lang);
    if (typeof window !== 'undefined') {
        localStorage.setItem('language', lang);
    }
  }
}
